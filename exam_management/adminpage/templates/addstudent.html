<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="Description" content="Enter your description here"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link rel="stylesheet" href="assets/css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<title>Add Student</title>
</head>
<body>

  {% include "header.html" %}   

  <center>
    <button id="excel" class="btn btn-success">Upload Excel</button>
  </center>


    <br><br>  
    <div class="container">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"> 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<form>      {% csrf_token %}
  {{ form }}

    <div class="main">
  <div class="form-group row">
    <label class="col-4 col-form-label" for="enrollment">Enrollment ID</label> 
    <div class="col-8">
      <input id="enrollment" name="enrollment" placeholder="Enrollment ID" type="text" required="required" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="name" class="col-4 col-form-label">Full Name</label> 
    <div class="col-8">
      <input id="name" name="name" placeholder="Full Name" type="text" required="required" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="sem" class="col-4 col-form-label">Sem</label> 
    <div class="col-8">
      <input id="sem" name="sem" placeholder="Semister" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="phone" class="col-4 col-form-label">Phone</label> 
    <div class="col-8">
      <input id="phone" name="phone" placeholder="Phone Number" type="text" class="form-control" required="required">
    </div>
  </div>
  <div class="form-group row">
    <label for="institute_code" class="col-4 col-form-label">Instuition Code</label> 
    <div class="col-8">
      <input id="institute_code" name="institute_code" placeholder="Institute Code" type="text" class="form-control" value="{{course.0}}" readonly>
    </div>
  </div>
  <div class="form-group row">
    <label for="program_code" class="col-4 col-form-label">Programme Code</label> 
    <div class="col-8">
      <input id="program_code" name="program_code" placeholder="Programe Code" type="text" class="form-control" value="{{course.1}}" readonly>
    </div>
  </div>
</div>
  <div class="form-group row">
    <label class="col-4">Gender</label> 
    <div class="col-8">
      <div class="custom-control custom-radio custom-control-inline">
        <input name="gender" id="gender_0" type="radio" class="custom-control-input" value="M" required> 
        <label for="gender_0" class="custom-control-label">Male</label>
      </div>
      <div class="custom-control custom-radio custom-control-inline">
        <input name="gender" id="gender_1" type="radio" class="custom-control-input" value="F" required> 
        <label for="gender_1" class="custom-control-label">Female</label>
      </div>
      <div class="custom-control custom-radio custom-control-inline">
        <input name="gender" id="gender_2" type="radio" class="custom-control-input" value="O" required> 
        <label for="gender_2" class="custom-control-label">Other</label>
      </div>
    </div>
  </div><br>
  <hr>

<!-- ------------------ -->
<br><br>
  <div class="form-group row">
    <label for="roll" class="col-4 col-form-label">Roll No</label> 
    <div class="col-8">
      <input id="roll" name="roll" placeholder="Roll Number" type="text" class="form-control" >
    </div>
  </div>
  <div class="form-group row">
    <label for="oldenrollment" class="col-4 col-form-label">Old Enrollment</label> 
    <div class="col-8">
      <input id="oldenrollment" name="oldenrollment" placeholder="Old Enrollment" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="dob" class="col-4 col-form-label">Date Of Birth</label> 
    <div class="col-8">
      <input id="dob" name="dob" placeholder="Date Of Birth" type="date" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="email" class="col-4 col-form-label">Email</label> 
    <div class="col-8">
      <input id="email" name="email" placeholder="Email ID" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="caste" class="col-4 col-form-label">Caste</label> 
    <div class="col-8">
      <input id="caste" name="caste" placeholder="Caste" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="subcaste" class="col-4 col-form-label">Sub Cast</label> 
    <div class="col-8">
      <input id="subcaste" name="subcaste" placeholder="Sub Caste" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="category" class="col-4 col-form-label">category</label> 
    <div class="col-8">
      <select id="category" name="category" class="custom-select">
        <option value="general">GENERAL</option>
        <option value="st">ST</option>
        <option value="sc">SC</option>
        <option value="obc">OBC</option>
      </select>
    </div>
  </div>
  <div class="form-group row">
    <label for="parent_contact" class="col-4 col-form-label">Parent Contact</label> 
    <div class="col-8">
      <input id="parent_contact" name="parent_contact" placeholder="Parent Contact" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="emergency_contact" class="col-4 col-form-label">Emergency Contact</label> 
    <div class="col-8">
      <input id="emergency_contact" name="emergency_contact" placeholder="Emergency Contact" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="userid" class="col-4 col-form-label">User ID</label> 
    <div class="col-8">
      <input id="userid" name="userid" placeholder="User ID" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="aadhaar" class="col-4 col-form-label">aadhaar Number</label> 
    <div class="col-8">
      <input id="aadhaar" name="aadhaar" placeholder="aadhaar Number" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="finalsem" class="col-4 col-form-label">Final Sem</label> 
    <div class="col-8">
      <input id="finalsem" name="finalsem" placeholder="Final Sem" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="term_end" class="col-4 col-form-label">Term End</label> 
    <div class="col-8">
      <input id="term_end" name="term_end" placeholder="Term End" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="total_credits" class="col-4 col-form-label">Total Credit</label> 
    <div class="col-8">
      <input id="total_credits" name="total_credits" placeholder="Total Credit" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="total_grade_points" class="col-4 col-form-label">Total Grade Points</label> 
    <div class="col-8">
      <input id="total_grade_points" name="total_grade_points" placeholder="Total Grade Points" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="total_backlog" class="col-4 col-form-label">Total Backlog</label> 
    <div class="col-8">
      <input id="total_backlog" name="total_backlog" placeholder="Total Backlog" type="text" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="photo" class="col-4 col-form-label">Photo</label> 
    <div class="col-8">
      <input id="photo" name="photo" placeholder="Photo" type="file" class="form-control">
    </div>
  </div>
  <div class="form-group row">
    <label for="address" class="col-4 col-form-label">Address</label> 
    <div class="col-8">
      <textarea id="address" name="address" cols="40" rows="4" class="form-control" aria-describedby="addressHelpBlock"></textarea> 
      <span id="addressHelpBlock" class="form-text text-muted">Address</span>
    </div>
  </div> 
  <div class="form-group row">
    <div class="offset-4 col-8">
      <button name="submit" type="submit" class="btn btn-primary">Submit</button>
    </div>
  </div>
</form>
    </div>




    <script>


  form=document.querySelector("form")
  form.addEventListener("submit",async(e)=>{
    e.preventDefault()

enrollment=document.getElementById("enrollment").value;
sem=document.getElementById("sem").value;
roll=document.getElementById("roll").value;
oldenrollment=document.getElementById("oldenrollment").value;
name=document.getElementById("name").value;
phone=document.getElementById("phone").value;
email=document.getElementById("email").value;
gender=$("input[type=radio][name=gender]:checked").val();
alert(gender) 
dob=document.getElementById("dob").value;
caste=document.getElementById("caste").value;
subcast=document.getElementById("subcaste").value;
category=document.getElementById("category").value;
// password=document.getElementById("password").value;
photo=document.getElementById("photo").value;
institute_code=document.getElementById("institute_code").value;
program_code=document.getElementById("program_code").value;
parent_contact=document.getElementById("parent_contact").value;
emergency_contact=document.getElementById("emergency_contact").value;
userid=document.getElementById("userid").value;
address=document.getElementById("address").value;
aadhaar=document.getElementById("aadhaar").value;
finalsem=document.getElementById("finalsem").value;
term_end=document.getElementById("term_end").value;
total_credits=document.getElementById("total_credits").value;
total_grade_points=document.getElementById("total_grade_points").value;
total_backlog=document.getElementById("total_backlog").value;





  csrf=document.getElementsByName("csrfmiddlewaretoken")[0].value
  console.log(csrf)
  newform=new FormData();


  newform.append("enrollment",enrollment);
  newform.append("sem",sem);
  newform.append("roll",roll);
  newform.append("oldenrollment",oldenrollment);
  newform.append("name",name);
  newform.append("phone",phone);
  newform.append("email",email);
  newform.append("gender",gender);
  newform.append("dob",dob);
  newform.append("caste",caste);
  newform.append("subcast",subcast);
  newform.append("category",category);
  newform.append("password",password);
  newform.append("photo",photo);
  newform.append("institute_code",institute_code);
  newform.append("program_code",program_code);
  newform.append("parent_contact",parent_contact);
  newform.append("emergency_contact",emergency_contact);
  newform.append("userid",userid);
  newform.append("address",address);
  newform.append("aadhaar",aadhaar);
  newform.append("finalsem",finalsem);
  newform.append("term_end",term_end);
  newform.append("total_credits",total_credits);
  newform.append("total_grade_points",total_grade_points);
  newform.append("total_backlog",total_backlog);



  newform.append("csrfmiddlewaretoken",csrf)
  try{
    let d=await fetch("{{ current_path }}/adminpage/doaddstudent/",{
    method:"POST",
    body:newform,    
  })
  x=await d.json()
  if(x.status=="success"){alert("Student Added Successfully");location.reload()}else{alert("Something went wrong \n record not added")}
  }catch{
    alert("Something went wrong \n record not added")
  }
  })






    </script>

    

</body>
</html>